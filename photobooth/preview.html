<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vizrize Photobooth Preview</title>
<style>
body,html{margin:0;padding:0;height:100%;font-family:'Roboto Mono',monospace;background:#f5f0e6;}
#photoPreview{display:block;margin:24px auto;max-width:90%;border:6px solid #fff;box-shadow:0 6px 20px rgba(0,0,0,0.06);}
#footerText{text-align:center;font-size:16px;color:#333;}
#qrcode{text-align:center;margin:16px;}
#qrCountdown{text-align:center;color:#222;margin:4px;font-size:14px;}
</style>
</head>
<body>
<img id="photoPreview"/>
<div id="footerText"></div>
<div id="qrcode"></div>
<div id="qrCountdown"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script>
window.addEventListener('DOMContentLoaded', ()=>{
  const photoPreview = document.getElementById('photoPreview');
  const footerText = document.getElementById('footerText');
  const qrcodeDiv = document.getElementById('qrcode');
  const qrCountdownEl = document.getElementById('qrCountdown');

  const params = new URLSearchParams(window.location.search);
  const imgUrlEncoded = params.get('img');
  if(!imgUrlEncoded) return;

  const imgUrl = decodeURIComponent(imgUrlEncoded);
  photoPreview.src = imgUrl;
  footerText.textContent = `Jakarta â€¢ ${new Date().toLocaleDateString('id-ID')}`;

  new QRCode(qrcodeDiv, {text: window.location.href, width: 300, height: 300, colorDark: '#000', colorLight: '#fff', correctLevel: QRCode.CorrectLevel.H});

  let remaining = 24*60*60; // 24 jam
  const tick = () => {
    const hours = Math.floor(remaining / 3600);
    const mins = Math.floor((remaining % 3600)/60);
    const secs = remaining % 60;
    qrCountdownEl.textContent = `Preview akan hilang dalam ${hours}h ${mins}m ${secs}s`;
    remaining--;
    if(remaining>=0) setTimeout(tick,1000);
    else window.location.href='index.html';
  }
  tick();
});
</script>
</body>
</html>
